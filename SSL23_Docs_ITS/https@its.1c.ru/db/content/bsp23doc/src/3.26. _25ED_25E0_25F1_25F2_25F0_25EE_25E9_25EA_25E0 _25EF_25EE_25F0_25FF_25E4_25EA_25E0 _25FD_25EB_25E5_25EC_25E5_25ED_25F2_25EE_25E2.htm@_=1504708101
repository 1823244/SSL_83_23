<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>3.26. &#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1072; &#1087;&#1086;&#1088;&#1103;&#1076;&#1082;&#1072; &#1101;&#1083;&#1077;&#1084;&#1077;&#1085;&#1090;&#1086;&#1074;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js@_=1504708101" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="3.26. _25ED_25E0_25F1_25F2_25F0_25EE_25E9_25EA_25E0 _25EF_25EE_25F0_25FF_25E4_25EA_25E0 _25FD_25EB_25E5_25EC_25E5_25ED_25F2_25EE_25E2.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<a name="_настройка_порядка_элементов"></a><h1>3.26. Настройка порядка элементов</h1>

<p class="Paragraph0c">Подсистема «Настройка порядка элементов» предназначена для
изменения порядка следования элементов справочника, плана видов характеристик
или плана видов расчета в динамических списках. Если справочник подчиненный, то
нумерация элементов выполняется в пределах владельца. Если справочник или ПВХ иерархический,
то нумерация элементов выполняется в пределах родителя.</p>

<p class="Paragraph0c">Подсистема накладывает ограничение на использование
отборов в динамических списках: в качестве отборов можно использовать только
поля основной таблицы списка. В противном случае в момент перемещения элемента
будет вызвано исключение.</p>

<p class="Warningword">Важно!</p>

<p class="Notes">Перемещение элементов вверх/вниз в динамическом списке
выполняется без учета пользовательского отбора, установленного стандартной
командой <span class="Interface">Найти…</span> </p>

<a name="issogl1_настройка"><h2>Настройка</h2></a>

<p class="Paragraph0c">Определить состав справочников и планов видов
характеристик, для которых требуется настраивать порядок элементов, указав их в
составе определяемого типа <span class="Interface">ОбъектСНастраиваемымПорядком</span>.</p>

<p class="Paragraph0c">Для каждого объекта, для которого предусмотрена настройка
порядка элементов:</p>

<p class="Number81">1. 
Добавить реквизит <span class="Interface">РеквизитДопУпорядочивания</span>.</p>

<p class="Objectname">Таблица 3.49.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <thead>
  <tr>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Свойство</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Значение</span></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td valign="top">
  <p class="TextinTable81">Тип значения</p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">Число</span>, длина – 5,
  точность – 0 (длина может быть изменена)</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">Индексировать</p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">Индексировать с доп.
  упорядочиванием</span></p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">Синоним</p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">Порядок</span></p>
  </td>
 </tr>
</table>

<p class="Number81">2. 
В модуль формы списка добавить фрагмент кода:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment">// ПРОЦЕДУРЫ ПОДСИСТЕМЫ НАСТРОЙКИ ПОРЯДКА ЭЛЕМЕНТОВ</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ПереместитьЭлементВверх<span class="operator">(</span>Команда<span class="operator">)</span>
    НастройкаПорядкаЭлементовКлиент<span class="operator">.</span>ПереместитьЭлементВверхВыполнить<span class="operator">(</span>Список<span class="operator">,</span> Элементы<span class="operator">.</span>Список<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>    
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ПереместитьЭлементВниз<span class="operator">(</span>Команда<span class="operator">)</span>
    НастройкаПорядкаЭлементовКлиент<span class="operator">.</span>ПереместитьЭлементВнизВыполнить<span class="operator">(</span>Список<span class="operator">,</span> Элементы<span class="operator">.</span>Список<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="Number81">3. 
В форме списка создать две команды и добавить их
на командную панель списка:</p>

<p class="MsoListBullet2">&#9679;  <span class="Interface">ПереместитьЭлементВверх</span>, картинка – <span class="Interface">ПереместитьВверх</span>, обработчик – <span class="Interface">ПереместитьЭлементВверх</span>;</p>

<p class="MsoListBullet2">&#9679;  <span class="Interface">ПереместитьЭлементВниз</span>, картинка – <span class="Interface">ПереместитьВниз</span>, обработчик – <span class="Interface">ПереместитьЭлементВниз</span>.</p>

<p class="Number81">4. 
В форме списка для динамического списка
установить сортировку по полю <span class="Interface">Порядок</span>.</p>

<p class="Number81">5. 
В форме списка для полей <span class="Interface">Порядок</span>
и <span class="Interface">Ссылка</span> динамического списка установить свойство <span class="Interface">Использовать всегда</span>.</p>

<p class="Paragraph0c">Если у объекта есть предопределенные элементы, то в
процедуре обновления информационной базы необходимо перезаписать эти элементы в
том порядке, в каком они должны отображаться в списке.</p>

<p class="Warningword">Важно!</p>

<p class="Notes">В списках, у которых есть отборы, а также для объектов с
включенным ограничением прав на уровне записей подсистема может использоваться
в ограниченном количестве случаев. Например, если каждый пользователь списка
видит только свои элементы, то перемещение любого элемента будет всегда
корректным. В остальных случаях возможна ситуация, когда один пользователь
двигает элемент в своей области видимости на одну позицию, а для другого
пользователя это «движение» выглядит, как «прыжок» элемента сразу на несколько
позиций.</p>

<a name="issogl2_настройка_прав_доступа_пользователей"><h3>Настройка прав доступа пользователей</h3></a>

<p class="Paragraph0c">Настройка прав доступа пользователей к данным подсистемы
«Настройка порядка элементов» не требуется.</p>

<a name="issogl1_использование_при_разработке_конфигурации"><h2>Использование при разработке конфигурации</h2></a>

<a name="issogl2_настройка_обмена_данными"><h3>Настройка обмена данными</h3></a>

<p class="Paragraph0c">Для настройки обмена данными никаких действий не
требуется, так как подсистема не предоставляет собственных данных.</p>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>