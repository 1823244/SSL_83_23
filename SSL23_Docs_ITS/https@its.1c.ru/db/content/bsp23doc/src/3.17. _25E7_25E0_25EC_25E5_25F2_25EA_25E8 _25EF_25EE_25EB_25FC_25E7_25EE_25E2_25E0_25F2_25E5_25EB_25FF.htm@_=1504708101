<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>3.17. &#1047;&#1072;&#1084;&#1077;&#1090;&#1082;&#1080; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js@_=1504708101" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="3.17. _25E7_25E0_25EC_25E5_25F2_25EA_25E8 _25EF_25EE_25EB_25FC_25E7_25EE_25E2_25E0_25F2_25E5_25EB_25FF.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<a name="_заметки_пользователя"></a><h1>3.17. Заметки пользователя</h1>

<p class="Paragraph0c">Подсистема «Заметки пользователя» предназначена для
хранения персональных заметок (различной неструктурированной информации,
которая недоступна для других пользователей информационной базы). Заметки можно
отмечать цветом, помещать на рабочий стол и объединять в группы.</p>

<a name="issogl1_настройка"><h2>Настройка</h2></a>

<p class="Paragraph0c">Для использования подсистемы «Заметки пользователя»
необходимо:</p>

<p class="Number81">1. 
Определить состав объектов конфигурации, по
поводу которых пользователи должны иметь возможность вводить заметки. Как
правило, это практически все справочники.</p>

<p class="Bullet0">Отметить выбранные типы объектов в свойстве <span class="Interface">Тип</span> определяемых<span class="Interface"> </span>типов<span class="Interface"> ПредметЗаметок</span> (ссылки)<span class="Interface"> </span>и <span class="Interface">ПредметЗаметокОбъект</span> (объекты).</p>

<p class="Bullet0">Создать подписку <span class="Interface">УстановитьСтатусИзмененияПометкиУдаленияОбъекта</span>
на событие <span class="Interface">ПередЗаписью</span>, указав в качестве
источника выбранные типы объектов (кроме документов), обработчик – <span class="Interface">ЗаметкиПользователя.УстановитьСтатусИзмененияПометкиУдаленияОбъекта</span>.</p>

<p class="Number81">2. 
Создать подписку <span class="Interface">УстановитьСтатусИзмененияПометкиУдаленияДокумента</span>
на событие <span class="Interface">ПередЗаписью</span>, указав в качестве
источника выбранные типы документов, обработчик – <span class="Interface">ЗаметкиПользователя.УстановитьСтатусИзмененияПометкиУдаленияДокумента</span>.</p>

<p class="Number81">3. 
Разместить форму <span class="Interface">МоиЗаметки</span>
справочника <span class="Interface">Заметки</span> на рабочем столе, команду <span class="Interface">ВсеЗаметки</span> справочника <span class="Interface">Заметки</span>
в командном интерфейсе пользователя.</p>

<p class="Warningword">Примечание</p>

<p class="Notes">Общие команды <span class="Interface">СоздатьЗаметкуПоПредмету</span>
и <span class="Interface">МоиЗаметкиПоПредмету</span> не появятся в формах групп
объектов автоматически. При такой потребности эти команды необходимо поместить
в командный интерфейс форм вручную:</p>

<p class="Picture"><IMG src="_img/bb4930f70ba50b6391a4d4b0238cf1d5/image008.png@_=1504708101" WIDTH="800" ALT HEIGHT="535"></p>

<a name="issogl2_настройка_прав_доступа_пользователей"><h3>Настройка прав доступа пользователей</h3></a>

<p class="Objectname">Таблица 3.32.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <thead>
  <tr>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">№</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Роли и их назначение</span></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td valign="top">
  <p class="MsoListNumber">1. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ПолныеПрава </span>(из
  подсистемы «Базовая функциональность»)</p>
  <p class="TextinTable81">Создание, редактирование своих заметок, просмотр
  заметок пользователей, удаление заметок</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoListNumber">2. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ДобавлениеИзменениеЗаметок</span></p>
  <p class="TextinTable81">Создание, просмотр и пометка на удаление только своих
  заметок</p>
  </td>
 </tr>
</table>

<a name="issogl1_использование_при_разработке_конфигурации"><h2>Использование при разработке конфигурации</h2></a>

<p class="Paragraph0c">Для отображения информации о наличии заметок
непосредственно в форме списка объекта рекомендуется предусмотреть в
конфигурации вспомогательный регистр сведений, в котором программно
поддерживается информация о наличии заметок по объекту. У всех пользователей
без ограничений должен быть предусмотрен доступ к этому регистру на просмотр.
По сравнению с конструкцией <span class="Interface">Когда…Тогда</span> с
непосредственной выборкой из справочника <span class="Interface">Заметки</span>,
при таком подходе к запросу не будут добавлены «тяжеловесные» ограничения
доступа к данным на уровне записей (RLS), что позволяет повысить скорость открытия
списка.</p>

<p class="Paragraph0c">Для реализации такого подхода реквизит формы с
динамическим списком необходимо переключить в режим <span class="Interface">Произвольный
запрос</span> и изменить текст запроса, добавив поле, как в примере в форме
списка справочника <span class="Interface">_ДемоКонтрагенты</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБРАТЬ</span>
    Справочник_ДемоКонтрагенты<span class="operator">.</span>Ссылка<span class="operator">,</span>
    Справочник_ДемоКонтрагенты<span class="operator">.</span>ПометкаУдаления<span class="operator">,</span>
    Справочник_ДемоКонтрагенты<span class="operator">.</span>Предопределенный<span class="operator">,</span>
    Справочник_ДемоКонтрагенты<span class="operator">.</span>Код<span class="operator">,</span>
    Справочник_ДемоКонтрагенты<span class="operator">.</span>Наименование<span class="operator">,</span>
    <span class="keyword">ВЫБОР</span>
        <span class="keyword">КОГДА</span> ЕСТЬNULL<span class="operator">(</span>_ДемоНаличиеЗаметокПоПредмету<span class="operator">.</span>ЕстьЗаметки<span class="operator">,</span> <span class="keyword">ЛОЖЬ</span><span class="operator">)</span>
            <span class="keyword">ТОГДА</span> <span class="number">0</span>
        <span class="keyword">ИНАЧЕ</span> <span class="operator">-</span><span class="number">1</span>
    <span class="keyword">КОНЕЦ</span> <span class="keyword">КАК</span> ЕстьЗаметки
<span class="keyword">ИЗ</span>
    Справочник<span class="operator">.</span>_ДемоКонтрагенты <span class="keyword">КАК</span> Справочник_ДемоКонтрагенты
        ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений<span class="operator">.</span>_ДемоНаличиеЗаметокПоПредмету <span class="keyword">КАК</span> _ДемоНаличиеЗаметокПоПредмету
        <span class="keyword">ПО</span> <span class="operator">(</span>Справочник_ДемоКонтрагенты<span class="operator">.</span>Ссылка <span class="operator">=</span> _ДемоНаличиеЗаметокПоПредмету<span class="operator">.</span>Предмет
                <span class="keyword">И</span> _ДемоНаличиеЗаметокПоПредмету<span class="operator">.</span>Автор <span class="operator">=</span> &Пользователь<span class="operator">)</span></pre>

<p class="Paragraph0c">Пример списка с колонкой-индикатором наличия заметок:</p>

<p class="Picture"><IMG src="_img/bb4930f70ba50b6391a4d4b0238cf1d5/image010.png@_=1504708101" WIDTH="540" ALT HEIGHT="265"></p>

<p class="Paragraph0c">Пример структуры вспомогательного регистра сведений:</p>

<p class="Picture"><IMG src="_img/bb4930f70ba50b6391a4d4b0238cf1d5/image012.png@_=1504708101" WIDTH="235" ALT HEIGHT="117"></p>

<a name="issogl2_настройка_обмена_данными"><h3>Настройка обмена данными</h3></a>

<p class="Paragraph0c">Все объекты метаданных подсистемы, содержащие данные,
рекомендуется включать в планы обмена распределенной ИБ (РИБ). </p>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>