<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>3.27. &#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1080; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1099;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js@_=1504708101" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="3.27. _25ED_25E0_25F1_25F2_25F0_25EE_25E9_25EA_25E8 _25EF_25F0_25EE_25E3_25F0_25E0_25EC_25EC_25FB.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<a name="_настройки_программы"></a><h1>3.27. Настройки программы</h1>

<p class="Paragraph0c">Подсистема «Настройки программы» предоставляет панели
настроек для всех подсистем библиотеки, размещаемые в разделе командного
интерфейса <span class="Interface">Администрирование</span>. Панели настроек
представлены формами обработки <span class="Interface">ПанельАдминистрированияБСП</span>.
</p>

<a name="issogl1_настройка"><h2>Настройка</h2></a>

<p class="Paragraph0c">Расположить подсистему <span class="Interface">Администрирование</span>
последней (крайней права) в списке разделов командного интерфейса (свойства конфигурации
– <span class="Interface">Командный интерфейс</span>).</p>

<p class="Paragraph0c">Если состав раздела <span class="Interface">Администрирование</span>
для объектов БСП не был загружен из поставки БСП (см. таблицы 3 и 4), то в
разделе <span class="Interface">Администрирование</span> следует разместить все
панели администрирования (формы обработки <span class="Interface">ПанельАдминистрированияБСП</span>),
а также частотные команды, которые должны быть на виду (например, удаление
помеченных объектов). Пример размещения см. в демонстрационной базе.</p>

<p class="Paragraph0c">Если в конфигурацию не встроена ни одна подсистема,
входящая в форму (в этом случае форма панели администрирования открывается
пустой), то рекомендуется отключить видимость команды этой панели. Например,
если не внедрена подсистема <span class="Interface">СинхронизацияДанных</span>,
то необходимо отключить в разделе <span class="Interface">Администрирование</span>
видимость команды <span class="Interface">НастройкиСинхронизацииДанных</span>. </p>

<p class="Paragraph0c">Необходимо принять решение по поводу состава настроек
конфигурации и места их размещения на панелях. При выборе панели настроек нужно
руководствоваться следующими соображениями:</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">ПоддержкаИОбслуживание</span>
предназначена для операций, которые периодически должен выполнять администратор
программы:</p>

<p class="MsoListBullet2">&#9679;  мониторинг
состояния системы;</p>

<p class="MsoListBullet2">&#9679;  резервное
копирование и восстановление;</p>

<p class="MsoListBullet2">&#9679;  оптимизация
быстродействия; </p>

<p class="MsoListBullet2">&#9679;  другие
операции;</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">ОбщиеНастройки</span>
предназначена для изменения общих для программы параметров работы (например, заголовка
программы, полнотекстового поиска и т. п.);</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">НастройкиПользователейИПрав</span>
предназначена для администрирования пользователей:</p>

<p class="MsoListBullet2">&#9679;  ведение
списка пользователей;</p>

<p class="MsoListBullet2">&#9679;  настройка
подсистемы прав доступа;</p>

<p class="MsoListBullet2">&#9679;  управление
настройками пользователей;</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">ПоискИУстановкаОбновлений</span>
предназначена для обновления версии программы и просмотра информации о предыдущих
обновлениях;</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">НастройкиРаботыСФайлами</span>
предназначена для настройки параметров подсистем, работающих с файлами;</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">НастройкиСинхронизацииДанных</span>
предназначена для настройки синхронизации данных с другими программами и
организации совместной работы в распределенной информационной базе;</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">Органайзер</span>
предназначена для настройки электронной почты, заметок, напоминаний и
бизнес-процессов;</p>

<p class="MsoListBullet">&#9679; 
форма <span class="Interface">ПечатныеФормыОтчетыИОбработки</span>
предназначена для настройки печатных форм, вариантов отчетов, рассылок отчетов
и дополнительных отчетов и обработок.</p>

<p class="Paragraph0c">На панелях настроек могут быть размещены поля
редактирования констант, гиперссылки для перехода к связанным формам настроек,
поясняющие надписи и другие элементы управления.</p>

<a name="issogl2_размещение_констант"><h3>Размещение констант</h3></a>

<p class="Paragraph0c">В формах настроек предусмотрен код, позволяющий упростить
процесс размещения констант. Для размещения константы необходимо:</p>

<p class="Number81">1. 
Перетащить константу из реквизита формы <span class="Interface">НаборКонстант</span> в элементы формы. Полю ввода должно быть
назначено то же имя, которое имеет константа. </p>

<p class="Number81">2. 
Определить обработчик поля ввода <span class="Interface">ПриИзменении</span>, разместив в нем вызов процедуры <span class="Interface">Подключаемый_ПриИзмененииРеквизита</span>, например:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ИмяКонстантыПриИзменении<span class="operator">(</span>Элемент<span class="operator">)</span>
    Подключаемый_ПриИзмененииРеквизита<span class="operator">(</span>Элемент<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="issogl2_размещение_гиперссылок"><h3>Размещение гиперссылок</h3></a>

<p class="Paragraph0c">Для размещения гиперссылки необходимо:</p>

<p class="Number81">1. 
Включить глобальную команду или объект с
командами в состав раздела <span class="Interface">Администрирование</span>. </p>

<p class="Number81">2. 
Выключить видимость команды (объекта) в этом
разделе для того, чтобы системный администратор имел возможность включить ее
обратно для часто используемых команд.</p>

<p class="Number81">3. 
В форме настройки перетащить команду в элементы
формы. Установить вид поля <span class="Interface">Гиперссылка</span>. </p>

<a name="issogl2_размещение_поясняющих_надписей"><h3>Размещение поясняющих надписей</h3></a>

<p class="Paragraph0c">Для всех полей ввода и гиперссылок рекомендуется добавлять
расширенные подсказки, поясняющие назначение элемента управления. При
добавлении расширенной подсказки необходимо установить у владельца свойство <span class="Interface">Отображение подсказки</span> в значение <span class="Interface">Отображать
снизу</span>, а также отключить у расширенной подсказки свойство <span class="Interface">АвтомаксимальнаяШирина</span>.</p>

<a name="issogl2_поддержка_различных_режимов_работы_конфигурации"><h3>Поддержка различных режимов работы конфигурации</h3></a>

<p class="Paragraph0c">Если конфигурация рассчитана на различные режимы работы,
следует управлять видимостью элементов управления на формах настроек. Например,
гиперссылка для перехода к форме <span class="Interface">Параметры
администрирования ИБ</span> должна быть видна только в клиент-серверном режиме
работы.</p>

<p class="Paragraph0c">Элементы формы, связанные с функциональными опциями,
скрываются автоматически. Если элементы формы не скрываются автоматически
(например, если это поясняющий текст, который не может быть включен в состав
функциональной опции), то в обработчике <span class="Interface">ПриСозданииНаСервере</span>
следует написать код, который будет скрывать всю группу. </p>

<p class="Paragraph0c">Для определения режима работы конфигурации в поставляемых
формах настроек для реквизита формы <span class="Interface">РежимРаботы</span>
можно использовать свойства: <span class="Interface">МодельСервиса</span>, <span class="Interface">Локальный</span>, <span class="Interface">Файловый</span>, <span class="Interface">КлиентСерверный</span>, <span class="Interface">ЛокальныйФайловый</span>,
<span class="Interface">ЛокальныйКлиентСерверный</span> (подробнее – см. описание
процедуры <span class="Interface">ПанельНастроекЗаполнитьРежимРаботы</span>
общего модуля <span class="Interface">НастройкиПрограммыСервер</span>).</p>

<p class="Paragraph0c">Например:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриСозданииНаСервере<span class="operator">(</span>Отказ<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    <span class="comment">// Настройки видимости при запуске</span>
    Элементы<span class="operator">.</span>ГруппаПараметрыАдминистрированияИБ<span class="operator">.</span>Видимость <span class="operator">=</span> РежимРаботы<span class="operator">.</span>КлиентСерверный<span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="issogl2_взаимосвязанные_элементы_управления"><h3>Взаимосвязанные элементы управления</h3></a>

<p class="Paragraph0c">Некоторые элементы могут быть связаны друг с другом,
например:</p>

<p class="MsoListBullet">&#9679; 
гиперссылка для перехода к списку <span class="Interface">Настройки версионирования объектов</span> должна быть доступна,
только когда установлен флажок <span class="Interface">Версионирование объектов</span>;</p>

<p class="MsoListBullet">&#9679; 
флажок <span class="Interface">Подчиненные
Бизнес-процессы</span> должен быть доступен только тогда, когда установлен
флажок <span class="Interface">Бизнес-процессы и задачи</span>.</p>

<p class="Paragraph0c">В таких ситуациях подчиненные элементы следует делать
недоступными (но оставлять видимыми) в зависимости от главного элемента. Для
этого нужно поместить обслуживающий код в процедуре <span class="Interface">УстановитьДоступность</span>.
Например:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> УстановитьДоступность<span class="operator">(</span>РеквизитПутьКДанным <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="operator">)</span>
    <span class="keyword">Если</span> РеквизитПутьКДанным <span class="operator">=</span> <span class="string">&quot;НаборКонстант.ИспользоватьБизнесПроцессыИЗадачи&quot;</span> <span class="keyword">ИЛИ</span> РеквизитПутьКДанным <span class="operator">=</span> <span class="string">&quot;&quot;</span> <span class="keyword">Тогда</span>
        Элементы<span class="operator">.</span>ОткрытьРолиИИсполнителиБизнесПроцессов<span class="operator">.</span>Доступность <span class="operator">=</span> НаборКонстант<span class="operator">.</span>ИспользоватьБизнесПроцессыИЗадачи<span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="issogl2_ролевая_видимость"><h3>Ролевая видимость</h3></a>

<p class="Paragraph0c">В некоторых сценариях с одной формой настроек могут
работать пользователи с различными правами доступа. Например, в модели сервиса
настройку программы могут выполнять и администратор абонента, и администратор
сервиса.</p>

<p class="Paragraph0c">В таких случаях формы настроек должны «разрезаться» по
правам доступа таким образом, чтобы пользователю (администратору) были видны
только те настройки, к которым он имеет доступ. </p>

<p class="Paragraph0c">Для этого необходимо добавить проверку ролей перед вызовом
кода, который изменяет свойства элементов из скрываемой группы в процедурах <span class="Interface">ПриСозданииНаСервере</span> или <span class="Interface">Доступность</span>
в процедуре <span class="Interface">УстановитьДоступность</span>. Например, для
проверки того, что с формой работает администратор сервиса:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> УстановитьДоступность<span class="operator">(</span>РеквизитПутьКДанным <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="operator">)</span>
    <span class="keyword">Если</span> РежимРаботы<span class="operator">.</span>ЭтоАдминистраторСистемы <span class="keyword">Тогда</span>
        <span class="operator">&lt;</span>Обслуживающий код<span class="operator">&gt;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="issogl2_настройка_прав_доступа_пользователей"><h3>Настройка прав доступа пользователей</h3></a>

<p class="Paragraph0c">Для настройки прав доступа пользователей следует
использовать роли, приведенные ниже.</p>

<p class="Objectname">Таблица 3.50.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <thead>
  <tr>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">№</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Роли и их назначение</span></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td valign="top">
  <p class="TextinTable81">1. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ПолныеПрава</span> (из
  подсистемы «Базовая функциональность»)</p>
  <p class="TextinTable81">Доступ ко всем прикладным настройкам программы и
  настройкам, специфичным только в локальном режиме работы</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">2. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">АдминистраторСистемы</span> (из
  подсистемы «Базовая функциональность»)</p>
  <p class="TextinTable81">Доступ ко всем общим настройкам программы при работе в
  модели сервиса, а также ко всем административным настройкам в локальном
  режиме</p>
  </td>
 </tr>
</table>

<a name="issogl2_настройка_обмена_данными"><h3>Настройка обмена данными</h3></a>

<p class="Paragraph0c">Для настройки обмена данными никаких действий не
требуется, так как подсистема не предоставляет собственных данных.</p>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>