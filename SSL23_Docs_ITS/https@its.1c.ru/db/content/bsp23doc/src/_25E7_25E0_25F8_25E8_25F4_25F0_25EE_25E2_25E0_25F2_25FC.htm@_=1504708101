<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1047;&#1072;&#1096;&#1080;&#1092;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="_25E7_25E0_25F8_25E8_25F4_25F0_25EE_25E2_25E0_25F2_25FC.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<a name="_электроннаяподписьклиентзашифровать"></a><h1>Зашифровать</h1>

<pre> Шифрует данные, возвращает сертификаты шифрования и добавляет их объект, если указано.
 Общий подход к обработке значений свойств с типом ОписаниеОповещения в параметре ОписаниеДанных.
  При выполнении обработки оповещения в нее передается структура параметров, в которой всегда есть
  свойство "Оповещение" типа ОписаниеОповещения, обработку которого нужно выполнить для продолжения.
  Кроме того, в структуре всегда есть свойство ОписаниеДанных, полученное при вызове процедуры.
  При вызове оповещения в качестве значения должна передаваться структура. Если в процессе асинхронного
  выполнения возникает ошибка, тогда в эту структуру нужно вставить свойство ОписаниеОшибки типа Строка.</pre>
<p class="Paragraph0c"><span class="Bold">Синтаксис</span></p>
<pre> Процедура Зашифровать(ОписаниеДанных, Форма = Неопределено, ОбработкаРезультата = Неопределено) Экспорт</pre>
<p class="Paragraph0c"><span class="Bold">Параметры</span></p>
<pre>  ОписаниеДанных - Структура - со свойствами:
    * Операция           - Строка - заголовок формы шифрования данных, например, Шифрование файла.
    * ЗаголовокДанных    - Строка - заголовок элемента или набора данных, например Файл.
    * СообщитьОЗавершении - Булево - (необязательный) - если Ложь, то не будет показано оповещение о успешном
                              завершении операции для представления данных, указанного рядом с заголовком.
    * НаборСертификатов  - Строка - (необязательный) адрес временного хранилища, содержащего массив, описанный ниже.
                         - Массив - (необязательный) содержит значения
                              типа СправочникСсылка.СертификатыКлючейЭлектроннойПодписиИШифрования или
                              типа ДвоичныеДанные (выгрузка сертификата).
                         - Ссылка - (необязательный) - ссылка на объект с табличной
                              частью СертификатыШифрования из которой их нужно получить.
    * ИзменятьНабор      - Булево - если Истина и НаборСертификатов задан и содержит только ссылки
                              на сертификаты, тогда будет возможность изменить состав сертификатов.
    * БезПодтверждения   - Булево - (необязательный) - пропустить подтверждение пользователя,
                              если указано свойство ОтборСертификатов.
    * ВыполнятьНаСервере - Неопределено, Булево - (необязательный) - когда не указан или Неопределено,
                              тогда выполнение будет определено автоматически: если есть сервер, то сначала
                              на сервере, потом при неудаче на клиенте, потом сообщение о двух ошибках.
                              Когда Истина: если есть разрешено выполнение на сервере, тогда выполнение
                              только на сервере, при неудаче одно сообщение об ошибке на сервере.
                              Когда Ложь: выполнение только на клиенте, как будто нет сервера.
    * КонтекстОперации   - Неопределено - (необязательный) - если указан, тогда в свойство будет
                              установлено определенное значение произвольного типа, которое позволяет
                              выполнить действие с теми же сертификатами шифрования повторно (у пользователя
                              не запрашивается подтверждение действия).
    * ------  ------   - Произвольный - (необязательный) - если определено, то действие будет выполнено
                              с теми же сертификатами шифрования.
                              Параметр БезПодтверждения считается равным Истина.
                              Параметры Операция, ЗаголовокДанных, НаборСертификатов, ИзменятьНабор
                              и ВыполнятьНаСервере игнорируются, их значения остаются, как при первом вызове.
    Вариант 1:
    * Данные                - ДвоичныеДанные - данные для шифрования.
    * --  --              - Строка - адрес временного хранилища, содержащего двоичные данные.
    * --  --              - ОписаниеОповещения - обработчик получения данных, который возвращает
                                 их в свойстве Данные (см. выше общий подход).
    * РазмещениеРезультата  - Неопределено - (необязательный) - описывает куда поместить зашифрованные данные.
                                 Если не указан или Неопределено, тогда через параметр ОбработкаРезультата.
    * --  --               - ОписаниеОповещения - обработчик сохранения зашифрованных данных.
                                 Следует учесть общий подход (см. выше).
                                 В момент вызова в ОписаниеДанных уже вставлен параметр ЗашифрованныеДанные.
                                 В случае параметра НаборДанных, в ОписаниеДанных вставляется
                                 свойство ТекущийЭлементНабораДанных, содержащее параметр ЗашифрованныеДанные.
    * Объект                - Ссылка - (необязательный) - ссылка на объект с табличной частью.
                                 СертификатыШифрования, в которую нужно их добавить после шифрования.
                                 Если не указан, то сертификаты шифрования не требуется добавлять.
    * ВерсияОбъекта         - Строка - (необязательный) - версия данных объекта для проверки и
                                 блокировки объекта перед добавлением сертификатов шифрования.
    * Представление         - Ссылка, Строка, Структура - (необязательный), если не указан, тогда
                                 представление вычисляется по значению свойства Объект.
                                 Структура содержит свойства:
                                    * Значение      - Ссылка, ОписаниеОповещения - для открытия.
                                    * Представление - Строка - представление значения.
    Вариант 2:
    * НаборДанных           - Массив - структуры со свойствами, описанными в Варианте 1.
    * ПредставлениеНабора   - Строка - представления нескольких элементов набора данных, например, "Файлы (%1)".
                                 В это представление в параметр %1 заполняется количество элементов.
                                 По гиперссылке можно открыть список.
                                 Если в наборе данных 1 элемент, тогда используется значение
                                 в свойстве Представление свойства НаборДанных, если не указано, тогда
                                 представление вычисляется по значению свойства Объект элемента набора данных.
    * СписокПредставлений   - СписокЗначений, Массив - (необязательный) - произвольный список элементов
                                 или массив со значениями, как у свойства Представление, которые
                                 сможет открыть пользователь. Если не указан, то заполняется из
                                 свойств Представление или Объект в свойстве НаборДанных.
  Форма - УправляемаяФорма  - форма из которой нужно получить уникальный идентификатор, который будет
                                использоваться при помещении зашифрованных данных во временное хранилище.
        - Неопределено      - использовать стандартную форму.
  ОбработкаРезультата - ОписаниеОповещения - необязательный параметр.
     Требуется для нестандартной обработки результата, если не указан параметр Форма и/или РазмещениеРезультата.
     В результат передается входной параметр ОписаниеДанных, который в успешном случае, дополняется свойствами:
     * Успех - Булево - Истина, если все прошло успешно. Если Успех = Ложь, то частичное завершение
               определяется по наличию свойства ЗашифрованныеДанные. Если есть, то шаг выполнен.
     * СертификатыШифрования - Строка - адрес временного хранилища, содержащего массив, описанный ниже.
                             - Массив - помещается перед началом шифрования и после этого не изменяется.
                                 Содержит значения типа Структура со свойствами:
                                 * Отпечаток     - Строка - отпечаток сертификата в формате строки Base64.
                                 * Представление - Строка - сохраненное представление субъекта,
                                                      полученное из двоичных данных сертификата.
                                 * Сертификат    - ДвоичныеДанные - содержит выгрузку сертификата,
                                                      который использовался для шифрования.
     * ЗашифрованныеДанные - ДвоичныеДанные - результат шифрования.
                             При передаче параметра НаборДанных, свойство нужно проверять в нем.
                           - Строка - адрес временного хранилища, содержащего результат шифрования.</pre>
<p class="Paragraph0c"><span class="Bold">Пример вызова</span></p>
<pre> ЭлектроннаяПодписьКлиент.Зашифровать(ОписаниеДанных, Форма, ОбработкаРезультата)</pre>
<p class="Paragraph0c"><span class="Bold">Доступность</span></p>
<pre> Тонкий клиент, Толстый клиент</pre>
	</body>
</html>