<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>3.49. &#1057;&#1082;&#1083;&#1086;&#1085;&#1077;&#1085;&#1080;&#1077; &#1087;&#1088;&#1077;&#1076;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1081; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js@_=1504708101" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="3.49. _25F1_25EA_25EB_25EE_25ED_25E5_25ED_25E8_25E5 _25EF_25F0_25E5_25E4_25F1_25F2_25E0_25E2_25EB_25E5_25ED_25E8_25E9 _25EE_25E1_25FA_25E5_25EA_25F2_25EE_25E2.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<a name="_структура_подчиненности"></a><h1>3.49. Склонение представлений объектов</h1>

<p class="Paragraph0c">Подсистема «Склонение представлений объектов»
предназначена для автоматического склонения представлений объектов с возможностью
ручной корректировки пользователем.</p>

<a name="issogl1_настройка"><h2>Настройка</h2></a>

<p class="Paragraph0c">Принять решение по поводу объектов метаданных конфигурации
ссылочного типа, представления которых следует склонять.</p>

<p class="Paragraph0c">Если в конфигурации не используется подсистема «Настройки
программы», тогда на рабочем месте администратора программы (администратора
сервиса, если конфигурация работает в модели сервиса) необходимо разместить
константы:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">ИспользоватьСервисСклоненияMorpher</span>,</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">ЛогинДоступаКСервисуMorpher</span>.</p>

<p class="Paragraph0c">Реквизит <span class="Interface">ПарольДоступаКСервисуMorpher</span>
нужно разместить на форме по правилам безопасного хранения паролей (см.
документацию к подсистеме «Базовая функциональность»).</p>

<p class="Paragraph0c">См. пример в форме <span class="Interface">ОбщиеНастройки</span>
обработки <span class="Interface">ПанельАдминистрированияБСП</span>.</p>

<p class="Paragraph0c">Для каждого объекта метаданных, который определен для
встраивания подсистемы склонения объектов, необходимо:</p>

<p class="MsoListBullet">&#9679; 
Все склоняемые объекты перечислить в свойстве <span class="Interface">Тип</span> определяемого типа <span class="Interface">ОбъектСклонения</span>.</p>

<p class="MsoListBullet">&#9679; 
Во всех формах элементов, для которых
встраивается склонение, в обработчике <span class="Interface">ПриСозданииНаСервере</span>
добавить фрагмент кода:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
СклонениеПредставленийОбъектов<span class="operator">.</span>ПриСозданииНаСервере<span class="operator">(</span>ЭтотОбъект<span class="operator">,</span> Представление<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span></pre>

<p class="Bullet0">В параметре <span class="Interface">Представление</span>
указывается реквизит, который должен склоняться.</p>

<p class="MsoListBullet">&#9679; 
Во всех формах элементов, для которых
встраивается склонение, в обработчике <span class="Interface">ПриЗаписиНаСервере</span>
добавить фрагмент кода:</p>

<p class="MsoListBullet2">&#9679; 
Если склоняемое представление – <span class="Interface">ФИО</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
СклонениеПредставленийОбъектов<span class="operator">.</span>ПриЗаписиНаСервере<span class="operator">(</span>ЭтотОбъект<span class="operator">,</span> Представление<span class="operator">,</span> ТекущийОбъект<span class="operator">.</span>Ссылка<span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">,</span> Пол<span class="operator">)</span><span class="operator">;</span>    
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов    </span></pre>

<p class="Bullet0">В параметре <span class="Interface">Представление</span>
указывается реквизит, который должен склоняться.</p>

<p class="Bullet0">В 5-м параметре передается пол физического лица (1 – мужской,
2 – женский, <span class="Interface">Неопределено</span> в случае, если пол не
указан).</p>

<p class="MsoListBullet2">&#9679; 
Если склоняемое представление – <span class="Interface">Не ФИО</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
СклонениеПредставленийОбъектов<span class="operator">.</span>ПриЗаписиНаСервере<span class="operator">(</span>ЭтотОбъект<span class="operator">,</span> Представление<span class="operator">,</span> ТекущийОбъект<span class="operator">.</span>Ссылка<span class="operator">)</span><span class="operator">;</span>    
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов    </span></pre>

<p class="Bullet0">В параметре <span class="Interface">Представление</span>
указывается реквизит, который должен склоняться.</p>

<p class="MsoListBullet">&#9679; 
Во всех формах элементов, для которых
встраивается склонение, рядом с реквизитом, который необходимо просклонять, добавить
команду в виде гиперссылки с названием <span class="Interface">Склонения</span>.
Обработчик команды:</p>

<p class="MsoListBullet2">&#9679; 
Если склоняемое представление – <span class="Interface">ФИО</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
СклонениеПредставленийОбъектовКлиент<span class="operator">.</span>ОбработатьКомандуСклонения<span class="operator">(</span>ЭтотОбъект<span class="operator">,</span> Представление<span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">,</span> Пол<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span></pre>

<p class="Bullet0">В параметре <span class="Interface">Представление</span>
указывается реквизит, который должен склоняться.</p>

<p class="Bullet0">В 4-м параметре передается пол физического лица (1 – мужской,
2 – женский, <span class="Interface">Неопределено</span> в случае, если пол не
указан).</p>

<p class="MsoListBullet2">&#9679; 
Если склоняемое представление – <span class="Interface">Не ФИО:</span></p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
СклонениеПредставленийОбъектовКлиент<span class="operator">.</span>ОбработатьКомандуСклонения<span class="operator">(</span>ЭтотОбъект<span class="operator">,</span> Представление<span class="operator">)</span><span class="operator">;</span>    
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span></pre>

<p class="Bullet0">В параметре <span class="Interface">Представление</span>
указывается реквизит, который должен склоняться.</p>

<p class="MsoListBullet">&#9679; 
Во всех формах элементов, для которых
встраивается склонение, в обработчике <span class="Interface">ПриИзменении</span>
реквизита, который должен склоняться добавить фрагмент кода:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
СклонениеПредставленийОбъектовКлиент<span class="operator">.</span>ПриИзмененииПредставления<span class="operator">(</span>ЭтотОбъект<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов    </span></pre>

<p class="MsoListBullet">&#9679; 
Во всех формах элементов, для которых
встраивается склонение, добавить в модуль формы следующий фрагмент кода:</p>

<p class="MsoListBullet2">&#9679; 
Если склоняемое представление – <span class="Interface">ФИО</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
<span class="preprocessor">&amp;НаКлиенте </span>
<span class="keyword">Процедура</span> Подключаемый_ПросклонятьПредставлениеПоВсемПадежам<span class="operator">(</span><span class="operator">)</span> <span class="keyword">Экспорт</span>
    СклонениеПредставленийОбъектовКлиент<span class="operator">.</span>ПросклонятьПредставлениеПоВсемПадежам<span class="operator">(</span>ЭтотОбъект<span class="operator">,</span> Представление<span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">,</span> Пол<span class="operator">)</span><span class="operator">;</span>        
<span class="keyword">КонецПроцедуры</span>
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов    </span></pre>

<p class="Bullet0">В параметре <span class="Interface">Представление</span>
указывается реквизит, который должен склоняться.</p>

<p class="Bullet0">В 4-м параметре передается пол физического лица (1 – мужской,
2 – женский, <span class="Interface">Неопределено</span> в случае, если пол не
указан).</p>

<p class="MsoListBullet2">&#9679; 
Если склоняемое представление – <span class="Interface">Не ФИО</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span>
<span class="preprocessor">&amp;НаКлиенте </span>
<span class="keyword">Процедура</span> Подключаемый_ПросклонятьПредставлениеПоВсемПадежам<span class="operator">(</span><span class="operator">)</span> <span class="keyword">Экспорт</span>
    СклонениеПредставленийОбъектовКлиент<span class="operator">.</span>ПросклонятьПредставлениеПоВсемПадежам<span class="operator">(</span>ЭтотОбъект<span class="operator">,</span> Представление<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="comment">// Конец СтандартныеПодсистемы.СклонениеПредставленийОбъектов</span></pre>

<p class="Bullet0">В параметре <span class="Interface">Представление</span>
указывается реквизит, который должен склоняться.</p>

<a name="issogl1_настройка_прав_доступа_пользователей"><h2>Настройка прав доступа пользователей</h2></a>

<p class="Paragraph0c">Для настройки прав доступа пользователей к данным
подсистемы «Склонение представлений объектов» следует использовать роли,
приведенные ниже.</p>

<p class="Objectname">Таблица 3.107.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <thead>
  <tr>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">№</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Роли и их назначение</span></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td valign="top">
  <p class="MsoListNumber">1. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ПолныеПрава</span> (из
  подсистемы «Базовая функциональность»)</p>
  <p class="TextinTable81">Включение и отключение использования веб-сервиса
  склонения <span class="Interface">Morpher.ru</span>, настройка доступа к
  сервису. Полный доступ к регистру сведений <span class="Interface">Склонения
  представлений объектов</span></p>
  </td>
 </tr>
</table>

<a name="issogl1_использование_при_разработке_конфигурации"><h2>Использование при разработке конфигурации</h2></a>

<p class="Paragraph0c">Программный интерфейс подсистемы представлен экспортными
функциями общих модулей:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">СклонениеПредставленийОбъектов</span>;</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">СклонениеПредставленийОбъектовКлиент</span>.</p>

<p class="Paragraph0c">Склонения представлений объектов хранятся в регистре
сведений <span class="Interface">Склонения представлений объектов</span>.</p>

<a name="issogl1_настройка_обмена_данными"><h2>Настройка обмена данными</h2></a>

<p class="Paragraph0c">Для настройки обмена данными следует руководствоваться
общими правилами.</p>

<p class="Paragraph0c">В планы обмена распределенной информационной базы (РИБ)
рекомендуется включать все объекты метаданных подсистемы.</p>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>