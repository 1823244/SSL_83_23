<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>5.15 &#1047;&#1072;&#1074;&#1077;&#1088;&#1096;&#1077;&#1085;&#1080;&#1077; &#1088;&#1072;&#1073;&#1086;&#1090;&#1099; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1077;&#1081;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="5.15 _25E7_25E0_25E2_25E5_25F0_25F8_25E5_25ED_25E8_25E5 _25F0_25E0_25E1_25EE_25F2_25FB _25EF_25EE_25EB_25FC_25E7_25EE_25E2_25E0_25F2_25E5_25EB_25E5_25E9.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<h1>5.15 Завершение работы пользователей</h1>

<p class="Paragraph0c"><a name="_блокировка_работы_пользователей"></a><a name="_список_активных_пользователей"></a><a name="_снятие_блокировки_пользователей"></a><a name="_снятие_блокировки_работы"></a>Для
администратора в программе предусмотрена возможность завершать работу
пользователей и блокировать вход в программу на определенный период времени.
Такая возможность востребована для проведения профилактических или срочных работ
в программе. Обычно такие работы проводят в ночные часы, для того чтобы не
затруднять работу в программе других пользователей. Однако бывают различные
внеплановые ситуации. Например, необходимо провести обновление версии
программы, восстановление программы после сбоя электроснабжения, резервное
копирование информационной базы,<span class="Note"> или главному бухгалтеру необходимо срочно рассчитать
сложный отчет. </span>Большинство этих работ не могут быть проведены,
если пользователи продолжают работать в программе.</p>

<p class="Paragraph0c">Также имеется возможность просмотра списка активных
пользователей и перехода к записям журнала регистрации по интересующему
пользователю. При работе в клиент-серверном варианте возможно отключение пользовательских
сеансов непосредственно из списка активных пользователей, а также блокировка
работы регламентных заданий.</p>

<a name="_блокировка_работы_пользователей_1"></a><a name="issogl1_блокировка_работы_пользователей"><h2>Блокировка работы пользователей</h2></a>

<p class="Paragraph0c">В разделе <span class="Note"><b>Администрирование</b></span><span class="Interface"> –
Поддержка и обслуживание </span>выполните команду <span class="Interface">Блокировка
работы пользователей</span>. </p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1488.png@_=1504708101" WIDTH="800" ALT HEIGHT="406"></p>

<p class="Paragraph0c">Заполните необходимые для блокировки параметры:</p>

<p class="Bullet1">&#9632; 
<span class="Interface">Сообщение для
пользователей</span>, которое должно быть выведено всем пользователям перед
завершением работы программы (укажите, когда необходимо выйти из программы,
опишите причину и ожидаемый период блокировки, <span class="Note">например: «Просьба завершить свою работу
в программе до 20:00 в связи с проведением профилактических работ. База будет
недоступна примерно 30 минут».</span>);</p>

<p class="Bullet1">&#9632; 
сроки блокировки (дата и время начала, дата и
время окончания). Окончание срока блокировки может не заполняться, в этом
случае войти в программу будет невозможно до снятия блокировки администратором,
подробнее см. в разделе <a href="#_снятие_блокировки_работы_1">Снятие
блокировки работы пользователей</a>;</p>

<p class="Bullet1">&#9632; 
<span class="Interface">Код для разблокировки</span>
– с его помощью можно досрочно снять блокировку работы пользователей. Подробнее
см. раздел <a href="#_снятие_блокировки_работы_1">Снятие блокировки работы пользователей</a>;</p>

<p class="Bullet1">&#9632; 
<span class="Interface">Включить возможность
управления блокировкой регламентных заданий</span> – в клиент-серверном
варианте программы можно запретить запуск регламентных заданий на время
действия блокировки. В этом случае для завершения работы пользователей
требуется ввести дополнительные параметры. Для этого перейдите по ссылке.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1490.png@_=1504708101" WIDTH="740" ALT HEIGHT="1000"></p>

<p class="Paragraph0c">В открывшемся окне <span class="Interface">Управление
блокировкой регламентных заданий</span> введите:</p>

<p class="Bullet1">&#9632; 
имя и пароль администратора, от имени которого
программа будет выполнять административные действия. В простейшем случае, это
могут быть Ваши имя и пароль, которые Вы используете для входа в программу. В
целях безопасности рекомендуется создать отдельного служебного пользователя с
административными правами. Следует иметь в виду, что имя и пароль хранятся
непосредственно в самой базе, и могут быть прочитаны, если злоумышленник
получит полный доступ к базе;</p>

<p class="Bullet1">&#9632; 
имя и пароль одного из администраторов кластера
серверов, в случае если для кластера серверов 1С:Предприятия настроена
авторизация;</p>

<p class="Bullet1">&#9632; 
выберите тип <span class="Interface">Подключения к
кластеру серверов</span> (например, COM-соединение с агентом сервера), <span class="Interface">Адрес</span>;
</p>

<p class="Bullet1">&#9632; 
Укажите номера портов кластера серверов и агента
сервера 1С:Предприятия, если они расположены по нестандартным портам. Как
правило, номер порта агента сервера отличается от порта кластера серверов на
единицу, например: 1540 и 1541.</p>

<p class="Paragraph0c">Подробнее об администрировании клиент-серверной ИБ см.
книгу «1С:Предприятие 8.2. Клиент-серверный вариант. Руководство
администратора».</p>

<p class="Paragraph0c">После ввода параметров администрирования ИБ нажмите кнопку
<span class="Interface">OK</span> для возврата в окно <span class="Interface">Блокировка
работы пользователей</span>.</p>

<p class="Paragraph0c">Нажмите кнопку <span class="Interface">Установить блокировку</span>,
для того чтобы заблокировать работу пользователей. Предварительно программа
запрашивает подтверждение администратора.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1492.png@_=1504708101" WIDTH="510" ALT HEIGHT="141"></p>

<p class="Paragraph0c">Примерно за пять минут до начала действия блокировки всем
пользователям программы выводится предупреждение о планируемом времени завершении
работы программы и текст сообщения блокировки, заданный администратором.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1494.png@_=1504708101" WIDTH="800" ALT HEIGHT="141"></p>

<p class="Paragraph0c">Для администратора программа выводит сообщение о проверке
активных сеансов. Перейдя по ссылке, можно просмотреть подробности в окне <span class="Interface">Блокировка пользователей</span>.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1496.png@_=1504708101" WIDTH="301" ALT HEIGHT="100"></p>

<p class="Paragraph0c">Нажав кнопку <span class="Interface">Остановить</span>,
администратор может отменить блокировку.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1498.png@_=1504708101" WIDTH="665" ALT HEIGHT="349"></p>

<p class="Paragraph0c">При наступлении времени блокировки будет автоматически
предпринята попытка завершить сеансы работы всех пользователей. Перед
блокировкой программа выдает запросы о необходимости сохранения данных и
завершения работы. Войти в программу с этого момента будет невозможно, блокировка
будет продолжаться до указанного администратором времени. При этом будут
выполнены стандартные действия при завершении работы — запрос на
завершение (если пользователь настроил себе подтверждение закрытия)<span class="Note">, отключение торгового
оборудования и т.д</span>. </p>

<p class="Paragraph0c">Нужно иметь в виду, что к моменту начала блокировки в
программе могут существовать «зависшие» сеансы (например, если пользователи в
конце рабочего дня забыли выйти из программы, программа зависла или был запущен
сложный отчет). Посмотреть данные о текущих сеансах работы с программой можно в
списке <span class="Interface">Активные пользователи</span> (подробнее см. раздел
<span class="Paragraph0c0"><a href="#_список_активных_пользователей_1">Список активных пользователей</a></span>).
Гарантированное завершение всех пользовательских сеансов возможно только в
клиент-серверном варианте программы. В файловом варианте программы требуется
завершить «зависшие» сеансы пользователей на их рабочих местах, а также, если
необходимо, завершить другие программы, которые подключены к базе по внешнему
соединению (COM) или с помощью веб-сервисов.</p>

<p class="Paragraph0c">Если принудительное завершение сеансов по каким-то
причинам невозможно (<span class="Note">например,
один из пользователей работает в <b>Конфигураторе</b></span>), выводится
сообщение об ошибке со списком пользователей и блокировка не устанавливается.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1500.png@_=1504708101" WIDTH="800" ALT HEIGHT="425"></p>

<p class="Paragraph0c">После завершения работы всех активных пользователей в
указанное время программа также выдает сообщение администратору о необходимости
завершении сеанса. Для того чтобы остаться в программе и провести
запланированные в ней работы, можно нажать кнопку <span class="Interface">Нет</span>.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1502.png@_=1504708101" WIDTH="533" ALT HEIGHT="125"></p>

<p class="Paragraph0c">При попытке войти в программу в период действия блокировки
появится предупреждение с инструкцией для администратора. Для того чтобы
разрешить работу пользователей, администратору предлагается произвести запуск
программы с параметрами. Подробнее см. раздел <a href="#_снятие_блокировки_работы_1">Снятие блокировки работы пользователей</a>.</p>

<p class="Paragraph0c">Нажмите кнопку <span class="Interface">Выполнить запуск</span>,
для того чтобы попытаться еще раз запустить программу или кнопку <span class="Interface">Отмена</span>, для того чтобы прекратить попытки и закрыть
программу. </p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1504.png@_=1504708101" WIDTH="800" ALT HEIGHT="223"></p>

<a name="_снятие_блокировки_работы_1"></a><a name="issogl1_снятие_блокировки_работы_пользователей"><h2>Снятие блокировки работы пользователей</h2></a>

<p class="Paragraph0c">После наступления указанного администратором срока
блокировка работы пользователей снимается автоматически.</p>

<p class="Paragraph0c">Снять блокировку сеансов досрочно можно тремя способами:</p>

<p class="Paragraph0c">1. 
Не завершая работу в программе, после окончания
запланированных работ выполнить команду <span class="Interface">Блокировка работы
пользователей</span> в разделе <span class="Note"><b>Администрирование</b></span><span class="Interface"> – Поддержка и обслуживание</span>, нажать кнопку <span class="Interface">Снять блокировку</span>.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1506.png@_=1504708101" WIDTH="551" ALT HEIGHT="349"></p>

<p class="Paragraph0c">2. 
Войти в программу и снять блокировку для всех
пользователей:</p>

<p class="Bullet1">&#9632; 
для входа в программу использовать указанные в
предупреждении параметры запуска (подробнее о параметрах запуска см. раздел <a href="#_параметры_запуска_программы">Использование параметров запуска программы</a>)</p>

<p class="Bullet1">&#9632; 
в параметре «<span class="Interface">/UC</span>» написать
код разрешения доступа, который был указан при установке блокировки. </p>

<p class="Note">Пример командной строки для информационной базы, которая
находится в каталоге </p>

<p class="Note">C:\Documents and
settings\Свет\Мои документы\1C\DemoSSL</p>

<p class="Note">с кодом разрешения «access»: </p>

<p class="Note"><b>&quot;E:\1с</b><b>\8.2.15.310\bin\1cv8.exe&quot;
Enterprise /F&quot;C:\Documents and settings\Свет</b><b>\Мои</b><b> документы</b><b>\1C\DemoSSL&quot; /CРазрешитьРаботуПользователей</b><b>/UCaccess</b></p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1508.png@_=1504708101" WIDTH="665" ALT HEIGHT="152"></p>

<p class="Bullet1">3. 
Войти в программу, не снимая блокировки, и снять
блокировку после проведения запланированных работ:</p>

<p class="Bullet1">&#9632; 
для входа в программу использовать указанные в
сообщении параметры запуска (подробнее см. раздел <a href="#_использование_параметров_запуска">Использование параметров запуска
программы</a>), но без параметра «<span class="Interface">/C</span><span class="Paragraph0c0">»</span>.
</p>

<p class="Bullet1">&#9632; 
В параметре «<span class="Interface">/UC</span>» написать
код разрешения доступа, который был указан при установке блокировки. </p>

<p class="Note">пример командной строки для информационной базы, которая
находится в каталоге </p>

<p class="Note">C:\Documents and
settings\Свет\Мои документы\1C\DemoSSL</p>

<p class="Note">с кодом разрешения «access»: </p>

<p class="Note"><b>&quot;E:\1с</b><b>\8.2.15.310\bin\1cv8.exe&quot;
Enterprise /F&quot;C:\Documents and settings\Свет</b><b>\Мои</b><b> документы</b><b>\1C\DemoSSL&quot; /UCaccess</b></p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1510.png@_=1504708101" WIDTH="661" ALT HEIGHT="136"></p>

<p class="Bullet1">&#9632; 
после проведения запланированных работ до
окончания срока блокировки выполнить команду <span class="Interface">Блокировка
работы пользователей</span><span class="Paragraph0c0"> в разделе </span><span class="Note"><b>Администрирование</b></span><span class="Interface"> – Поддержка и обслуживание</span>, нажать кнопку <span class="Interface">Снять блокировку</span>.</p>

<a name="_параметры_запуска_программы"></a><a name="_использование_параметров_запуска"></a><a name="issogl2_использование_параметров_запуска_программы"><h3>Использование параметров запуска программы</h3></a>

<p class="Paragraph0c">При запуске программы могут использоваться различные
параметры. Подробнее о параметрах запуска см. документацию к платформе. </p>

<p class="Paragraph0c">В строке для запуска программы можно использовать
следующие параметры:</p>

<p class="Bullet1">&#9632; 
В параметре <span class="Interface">/F</span>
укажите путь к базе (“<span class="Note"><b>С:\Documents
and Settings\…..\1CDemoSSL</b></span>”);</p>

<p class="Bullet1">&#9632; 
В параметре <span class="Interface">/N</span>
укажите имя пользователя;</p>

<p class="Bullet1">&#9632; 
В параметре <span class="Interface">/P</span> укажите
пароль;</p>

<p class="Bullet1">&#9632; 
В параметре <span class="Interface">/C</span> указываются
параметры-команды, например, <span class="Interface">РазрешитьРаботуПользователей</span>;</p>

<p class="Bullet1">&#9632; 
В параметре /<span class="Interface">UC</span>
укажите код доступа, который был задан при блокировке работы пользователей.</p>

<p class="Paragraph0c">Для установки блокировки также можно использовать запуск
программы с параметром <span class="Interface">ЗавершитьРаботуПользователей</span>:</p>

<p class="Note"><b>C:\Program
Files\1cv81\bin\1cv8.exe&quot; ENTERPRISE /FD:\1с</b><b>\z2009 /NAdministrator /Pxxxxx /CЗавершитьРаботуПользователей</b><b>/</b></p>

<p class="Paragraph0c">Для снятия блокировки рекомендуется использовать запуск
программы с параметром <span class="Interface">РазрешитьРаботуПользователей </span>*.</p>

<p class="Note"><b>&quot;E:\1с\8.2.15.310\bin\1cv8.exe&quot;</b> <b>ENTERPRISE
/F“C:\Documents and Settings\Свет\Мои документы\1С\DemoSSL”
/CРазрешитьРаботуПользователей /UC&lt;код разрешения&gt;. </b></p>

<p class="Paragraph0c"><span class="Interface">*</span> Запуск клиентского приложения
с параметром <span class="Interface">РазрешитьРаботуПользователей</span>
предназначен только для снятия блокировки и не предназначен для работы с
программой, т.е. этот параметр предназначен для выполнения в пакетном режиме –
работа клиентского приложения, запущенного с этим параметром, будет завершена
сразу после запуска.</p>

<a name="_список_активных_пользователей_1"></a><a name="issogl2_список_активных_пользователей"><h3>Список активных пользователей</h3></a>

<p class="Paragraph0c">По команде <span class="Interface">Активные пользователи</span>
раздела<span class="Interface"> </span><span class="Note"><b>Администрирование</b></span><span class="Interface"> – Поддержка и обслуживание</span> можно перейти к списку
пользователей, которые в настоящий момент времени работают в программе. В списке
также отображаются внешние пользователи, сеансы, установленные в других режимах
подключения, например, соединения, которые производились из других программ
через внешние соединения (СОМ) или веб-сервисы. Режим подключения можно увидеть
в колонке <span class="Interface">Приложение</span>. Кроме этого, в списке
указаны сетевое имя компьютера, с которого выполнен вход в программу, время
начала работы и номер сеанса, а также разделение данных. Подробнее о механизме
разделения данных см. в книге «1С:Предприятие. Руководство разработчика».</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1512.png@_=1504708101" WIDTH="800" ALT HEIGHT="418"></p>

<p class="Paragraph0c">В клиент-серверном варианте работы с помощью
соответствующей кнопки имеется возможность <span class="Interface">Завершить
сеанс</span> любого выбранного пользователя (кроме текущего). Подробнее см.
раздел <a href="#_блокировка_работы_пользователей_1">Блокировка работы пользователей</a>.</p>

<p class="Picture"><IMG src="_img/6a86e8eeb8675758b0754db5426adc35/image1514.png@_=1504708101" WIDTH="800" ALT HEIGHT="488"></p>

<p class="Paragraph0c">С помощью соответствующих команд можно выполнить
сортировку пользователей в списке (по возрастанию и убыванию), а также обновить
список.</p>

<p class="Paragraph0c">Для анализа работы выбранного пользователя в списке <span class="Interface">Активные пользователи </span>нажмите кнопку <span class="Interface">Журнал регистрации</span>. Подробнее см. раздел документации
Настройки программы.</p>

<a name="issogl1_роли_для_завершения_работы_пользователей"><h2>Роли для завершения работы пользователей</h2></a>

<p class="Paragraph0c">Для настройки прав доступа пользователей к данным
возможностям программы следует использовать роли, указанные ниже.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="TextinTable81">Роль</p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Краткое описание</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">Полные права</span></p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Блокировка работы пользователей. </p>
  <p class="TextinTable81"><span class="Note">Отключение
  сеансов пользователей из списка <b>Активные пользователи</b></span> (<span class="Note">в клиент-серверном варианте программы</span>).</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">Администратор системы</span></p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Блокировка запуска регламентных заданий.</p>
  <p class="TextinTable81"><span class="Note">Настройка
  параметров администрирования кластера 1С:Предприятия</span> (<span class="Note">в клиент-серверном варианте программы</span>).</p>
  </td>
 </tr>
</table>
	</body>
</html>