<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>3.37. &#1055;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1080;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js@_=1504708101" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="3.37. _25EF_25EE_25EB_25FC_25E7_25EE_25E2_25E0_25F2_25E5_25EB_25E8.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<a name="_пользователи"></a><h1>3.37. Пользователи</h1>

<p class="Paragraph0c">Подсистема «Пользователи» предназначена для просмотра и
редактирования списка пользователей и внешних пользователей системы (элементы
справочников <span class="Interface">Пользователи</span> и <span class="Interface">Внешние
пользователи</span>), который синхронизируется со списком пользователей
информационной базы. </p>

<p class="Paragraph0c">Внешние пользователи предназначены для организации доступа
к информационной системе тем пользователям, которые представлены в ней одним из
объектов (например, <span class="Interface">Сотрудники</span>, <span class="Interface">Партнеры</span>, <span class="Interface">Физические лица</span> и
др.). Подсистема предоставляет средства для сопоставления внешних пользователей
с объектами информационной базы.</p>

<a name="issogl1_настройка"><h2>Настройка</h2></a>

<p class="Paragraph0c">Для использования подсистемы в конфигурации необходимо:</p>

<p class="MsoListBullet">&#9679; 
Если в конфигурации уже имеются объекты, которые
идентифицируют внешних пользователей, необходимо принять решение, какие из них
будут использоваться и перечислить допустимые типы внешних пользователей:</p>

<p class="MsoListBullet2">&#9679;  в
определяемых типах <span class="Interface">ВнешнийПользователь</span> (ссылки) и <span class="Interface">ВнешнийПользовательОбъект</span> (объекты);</p>

<p class="MsoListBullet2">&#9679;  в
свойстве <span class="Interface">Тип</span> <span class="Interface">параметра
команды</span> команды <span class="Interface">ВнешнийДоступ</span> справочника <span class="Interface">ВнешниеПользователи</span>;</p>

<p class="MsoListBullet2">&#9679;  в
определяемом типе <span class="Interface">Пользователь</span> (ссылки). В состав
этого типа также входит тип <span class="Interface">СправочникСсылка.Пользователи</span>.</p>

<p class="MsoListBullet">&#9679; 
Для использования возможности указывать значения
реквизитов <span class="Interface">Физическое лицо</span> и <span class="Interface">Подразделение</span> в форме элемента справочника <span class="Interface">Пользователи</span> необходимо задать состав определяемых типов
<span class="Interface">ФизическоеЛицо</span> и <span class="Interface">Подразделение</span>.
Если в конфигурации состав этих определяемых типов не задан, то в форме
элемента справочника <span class="Interface">Пользователи</span> эти реквизиты
скрываются.</p>

<a name="issogl2_размещение_в_командном_интерфейсе"><h3>Размещение в командном интерфейсе</h3></a>

<p class="Paragraph0c">Для использования подсистемы необходимо разместить в
командном интерфейсе:</p>

<p class="MsoListBullet">&#9679; 
Справочник <span class="Interface">Пользователи</span>:</p>

<p class="MsoListBullet2">&#9679;  для
просмотра списка, свойств и выбора пользователей (обычными пользователями);</p>

<p class="MsoListBullet2">&#9679;  для
просмотра и редактирования состава и свойств пользователей (ответственными за
список пользователей и администраторами).</p>

<p class="MsoListBullet">&#9679; 
Справочник <span class="Interface">ВнешниеПользователи</span>:</p>

<p class="MsoListBullet2">&#9679;  для
просмотра списка, свойств и выбора внешних пользователей (обычными
пользователями);</p>

<p class="MsoListBullet2">&#9679;  для
просмотра и редактирования состава и свойств внешних пользователей
(ответственными за список внешних пользователей и администраторами).</p>

<p class="Paragraph0c">Для доступа пользователей к своим персональным настройкам
необходимо создать и разместить в форме персональных настроек команду <span class="Interface">Сведения о пользователе</span>.</p>

<p class="Paragraph0c">См. пример размещения в демонстрационной конфигурации, в
форме <span class="Interface">_ДемоМоиНастройки</span> на закладке <span class="Interface">Общие</span>.</p>

<p class="Paragraph0c">В случае если в конфигурации не используется подсистема
«Настройки программы», в рабочем месте администратора программы необходимо
разместить константы:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">ИспользоватьВнешнихПользователей</span>
– для включения/выключения возможности использования внешних пользователей;</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">ИспользоватьГруппыПользователей</span>
– для включения/выключения возможности использования групп пользователей и
групп внешних пользователей.</p>

<p class="Paragraph0c">Для корректного обновления форм требуется отправлять
оповещения об изменении констант.</p>

<p class="Paragraph0c">См. пример в форме <span class="Interface">НастройкиПользователейИПрав</span>
обработки <span class="Interface">ПанельАдминистрированияБСП</span>.</p>

<p class="Paragraph0c">Для удобства работы на рабочий стол рекомендуется вынести
формы тех подсистем, которые будут доступны внешнему пользователю после
успешной аутентификации. Например, это может быть форма доступных анкет
респондента или форма заказов покупателя.</p>

<a name="issogl2_назначение_ролей"><h3>Назначение ролей</h3></a>

<p class="Paragraph0c">Роли отбираются по назначению при выборе в режиме <span class="Interface">1С:Предприятие</span>. Например, роли только для внешних пользователей
недоступны для пользователей. При входе пользователя в «1С:Предприятие» выполняется
проверка ролей в целях безопасности (в модели сервиса проверяются роли
пользователя, в локальном режиме проверяются роли внешнего пользователя). Также
назначение ролей проверяются в профилях групп доступа (см. подсистему «<A href="3.53. _25F3_25EF_25F0_25E0_25E2_25EB_25E5_25ED_25E8_25E5 _25E4_25EE_25F1_25F2_25F3_25EF_25EE_25EC.htm@_=1504708101#_управление_доступом">Управление доступом</a>»).</p>

<p class="Paragraph0c">При разработке ролей необходимо указывать роли
специального назначения в процедуре <span class="Interface">ПриОпределенииНазначенияРолей</span>
общего модуля <span class="Interface">ПользователиПереопределяемый</span>. Все
остальные роли не требуется указывать. Назначение ролей подробно описано в
комментарии к процедуре.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Позволяет указать роли специального назначения. Все остальные роли не требуется указывать -</span>
<span class="comment">// это роли, которые предназначены для любых пользователей, кроме внешних пользователей.</span>
<span class="comment">//</span>
<span class="comment">// Параметры:</span>
<span class="comment">//  НазначениеРолей - Структура - со свойствами:</span>
<span class="comment">//   * ТолькоДляАдминистраторовСистемы - Массив - имена ролей, которые при выключенном разделении</span>
<span class="comment">//     предназначены для любых пользователей, кроме внешних пользователей, а в разделенном режиме</span>
<span class="comment">//     предназначены только для администраторов сервиса, например:</span>
<span class="comment">//       Администрирование, ОбновлениеКонфигурацииБазыДанных, АдминистраторСистемы,</span>
<span class="comment">//     а также все роли с правами:</span>
<span class="comment">//       Администрирование,</span>
<span class="comment">//       Администрирование расширений конфигурации,</span>
<span class="comment">//       Обновление конфигурации базы данных.</span>
<span class="comment">//     Такие роли, как правило, существуют только в БСП и не встречаются в прикладных решениях.</span>
<span class="comment">//</span>
<span class="comment">//   * ТолькоДляПользователейСистемы - Массив - имена ролей, которые при выключенном разделении</span>
<span class="comment">//     предназначены для любых пользователей, кроме внешних пользователей, а в разделенном режиме</span>
<span class="comment">//     предназначены только для неразделенных пользователей (сотрудников технической поддержки сервиса и</span>
<span class="comment">//     администраторов сервиса), например:</span>
<span class="comment">//       ДобавлениеИзменениеАдресныхСведений, ДобавлениеИзменениеБанков,</span>
<span class="comment">//     а также все роли с правами изменения неразделенных данных и следующими правами:</span>
<span class="comment">//       Толстый клиент,</span>
<span class="comment">//       Внешнее соединение,</span>
<span class="comment">//       Automation,</span>
<span class="comment">//       Режим все функции,</span>
<span class="comment">//       Интерактивное открытие внешних обработок,</span>
<span class="comment">//       Интерактивное открытие внешних отчетов.</span>
<span class="comment">//     Такие роли в большей части существует в БСП, но могут встречаться и в прикладных решениях.</span>
<span class="comment">//</span>
<span class="comment">//   * ТолькоДляВнешнихПользователей - Массив - имена ролей, которые предназначены</span>
<span class="comment">//     только для внешних пользователей (роли со специально разработанным набором прав), например:</span>
<span class="comment">//       ДобавлениеИзменениеОтветовНаВопросыАнкет, БазовыеПраваВнешнегоПользователя.</span>
<span class="comment">//     Такие роли существуют и в БСП, и в прикладных решениях (если используются внешние пользователи).</span>
<span class="comment">//</span>
<span class="comment">//   * СовместноДляПользователейИВнешнихПользователей - Массив - имена ролей, которые предназначены</span>
<span class="comment">//     для любых пользователей (и внутренних, и внешних, и неразделенных), например:</span>
<span class="comment">//       ЧтениеОтветовНаВопросыАнкет, ИспользованиеВариантовОтчетов.</span>
<span class="comment">//     Такие роли существуют и в БСП, и в прикладных решениях (если используются внешние пользователи).</span>
<span class="comment">//</span>
<span class="keyword">Процедура</span> ПриОпределенииНазначенияРолей<span class="operator">(</span>НазначениеРолей<span class="operator">)</span> <span class="keyword">Экспорт</span>
    <span class="comment">// ТолькоДляВнешнихПользователей.</span>
    НазначениеРолей<span class="operator">.</span>ТолькоДляВнешнихПользователей<span class="operator">.</span>Добавить<span class="operator">(</span>
        Метаданные<span class="operator">.</span>Роли<span class="operator">.</span>_ДемоОплатаСчетовВнешнимиПользователями<span class="operator">.</span>Имя<span class="operator">)</span><span class="operator">;</span>
    НазначениеРолей<span class="operator">.</span>ТолькоДляВнешнихПользователей<span class="operator">.</span>Добавить<span class="operator">(</span>
        Метаданные<span class="operator">.</span>Роли<span class="operator">.</span>_ДемоЧтениеДанныхОбъектовАвторизации<span class="operator">.</span>Имя<span class="operator">)</span><span class="operator">;</span>
    <span class="comment">// СовместноДляПользователейИВнешнихПользователей.</span>
    НазначениеРолей<span class="operator">.</span>СовместноДляПользователейИВнешнихПользователей<span class="operator">.</span>Добавить<span class="operator">(</span>
        Метаданные<span class="operator">.</span>Роли<span class="operator">.</span>_ДемоЧтениеДанныхДляОтветовНаВопросыАнкет<span class="operator">.</span>Имя<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="issogl2_отображение_внешних_пользователей_в_списках"><h3>Отображение внешних пользователей в списках</h3></a>

<p class="Paragraph0c">В конфигурациях, в которых предоставляется партнерам или
сотрудникам доступ к программе извне, рекомендуется в форме списка справочника
добавить колонку показывающую наличие внешнего доступа у этого партнера или
сотрудника. Для этого, например, в форме списка справочника <span class="Interface">_ДемоПартнеры</span>, являющегося объектом авторизации
справочника <span class="Interface">Внешние пользователи</span>, необходимо в
запросе динамического списка сделать левое соединение со справочником <span class="Interface">ВнешниеПользователи</span> (по реквизиту <span class="Interface">ОбъектАвторизации</span>).</p>

<p class="Paragraph0c">Было:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБРАТЬ</span> РАЗРЕШЕННЫЕ
    Справочник_ДемоПартнеры<span class="operator">.</span>Ссылка <span class="keyword">КАК</span> Ссылка<span class="operator">,</span>
    Справочник_ДемоПартнеры<span class="operator">.</span>Наименование <span class="keyword">КАК</span> Наименование
<span class="keyword">ИЗ</span>
    Справочник<span class="operator">.</span>_ДемоПартнеры <span class="keyword">КАК</span> Справочник_ДемоПартнеры</pre>

<p class="Paragraph0c">Стало:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБРАТЬ</span> РАЗРЕШЕННЫЕ
<span class="keyword">НЕ</span> ВнешниеПользователи<span class="operator">.</span>Ссылка ЕСТЬ <span class="keyword">NULL</span> <span class="keyword">Как</span> ВнешнийДоступ<span class="operator">,</span>
    Справочник_ДемоПартнеры<span class="operator">.</span>Ссылка <span class="keyword">КАК</span> Ссылка<span class="operator">,</span>
    Справочник_ДемоПартнеры<span class="operator">.</span>Наименование <span class="keyword">КАК</span> Наименование
<span class="keyword">ИЗ</span>
    Справочник<span class="operator">.</span>_ДемоПартнеры <span class="keyword">КАК</span> Справочник_ДемоПартнеры
        ЛЕВОЕ СОЕДИНЕНИЕ Справочник<span class="operator">.</span>ВнешниеПользователи <span class="keyword">КАК</span> ВнешниеПользователи
        <span class="keyword">ПО</span> Справочник_ДемоПартнеры<span class="operator">.</span>Ссылка <span class="operator">=</span> ВнешниеПользователи<span class="operator">.</span>ОбъектАвторизации
        <span class="keyword">И</span> <span class="keyword">НЕ</span> ВнешниеПользователи<span class="operator">.</span>Недействителен
        <span class="keyword">И</span> <span class="keyword">НЕ</span> ВнешниеПользователи<span class="operator">.</span>ПометкаУдаления</pre>

<p class="MsoListBullet">&#9679; 
В событие<span class="Interface"> ПриСозданиеНаСервере</span>
разместить следующий код:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ВнешниеПользователи<span class="operator">.</span>НастроитьОтображениеСпискаВнешнихПользователей<span class="operator">(</span>ЭтотОбъект<span class="operator">)</span><span class="operator">;</span></pre>

<p class="Paragraph0c">См. пример в форме <span class="Interface">ФормаСписка</span>
справочника <span class="Interface">_ДемоПартнеры в демонстрационной базе</span>.</p>

<a name="issogl2_настройка_прав_доступа_пользователей"><h3>Настройка прав доступа пользователей</h3></a>

<p class="Paragraph0c">Для настройки прав доступа пользователей к данным
подсистемы «Пользователи» следует использовать роли, указанные ниже.</p>

<p class="Objectname">Таблица 3.77.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <thead>
  <tr>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">№</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Роли и их назначение</span></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td valign="top">
  <p class="TextinTable81">1. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">Базовые права</span> (из
  подсистемы «Базовая функциональность»)</p>
  <p class="TextinTable81">Чтение списка пользователей без ограничений</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">2. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ДобавлениеИзменениеПользователей</span>
  (используется совместно с ролью <span class="Interface">БазовыеПрава</span>).</p>
  <p class="TextinTable81">Добавление и изменение пользователей и групп
  пользователей без настройки доступа к программе.</p>
  <p class="TextinTable81">Дополнительная роль, предназначенная для секретарей,
  менеджеров по персоналу: добавление новых пользователей при приеме на работу,
  исправление ФИО контактной информации и других нормативных свойств
  пользователя, создание новых групп пользователей.</p>
  <p class="TextinTable81">Сокращает рутинную нагрузку на администратора в
  крупных компаниях</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">3. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ЧтениеВнешнихПользователей</span>
  (используется совместно со вспомогательной ролью <span class="Interface">&lt;ЧтениеДанныхОбъектовАвторизации&gt;</span>).</p>
  <p class="TextinTable81">Чтение внешних пользователей и групп внешних
  пользователей (просмотр списка внешних пользователей без ограничений)</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">4. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ДобавлениеИзменениеВнешнихПользователей</span>
  (используется совместно со вспомогательной ролью <span class="Interface">&lt;ЧтениеДанныхОбъектовАвторизации&gt;</span>).</p>
  <p class="TextinTable81">Добавление и изменение внешних пользователей и групп
  внешних пользователей без настройки доступа к программе (просмотр списка
  внешних пользователей без ограничений).</p>
  <p class="TextinTable81">Дополнительная роль, предназначенная для помощников
  руководителей менеджеров по продажам и закупкам: добавление новых внешних
  пользователей при новых контактах, создание новых групп внешних пользователей.</p>
  <p class="TextinTable81">Сокращает рутинную нагрузку на администратора в
  крупных компаниях</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">5. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">ПолныеПрава</span> (из
  подсистемы «Базовая функциональность»)</p>
  <p class="TextinTable81">Добавление и изменение пользователей, групп
  пользователей, внешних пользователей, групп внешних пользователей, настроек
  входа и прав доступа.</p>
  <p class="TextinTable81">Изменение пароля, имени для входа и остальных свойств
  любого пользователя и внешнего пользователя.</p>
  <p class="TextinTable81">Включение и отключение использования внешних
  пользователей. </p>
  <p class="TextinTable81">Удаление объектов подсистемы, помеченных на удаление</p>
  </td>
 </tr>
</table>

<p class="Paragraph0c">Дополнительно следует создать вспомогательные роли или
использовать подходящие роли, существующие в конфигурации, для обеспечения
доступа к данным, которые не относятся к подсистеме «Пользователи», но
требуются для работы с ней.</p>

<p class="Objectname">Таблица 3.78.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <thead>
  <tr>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">№</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Вспомогательные роли и их
   назначение</span></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td valign="top">
  <p class="TextinTable81">1. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81"><span class="Interface">&lt;ЧтениеДанныхОбъектовАвторизации&gt;</span></p>
  <p class="TextinTable81">Чтение объектов метаданных, значения которых могут
  выступать в качестве объектов авторизации</p>
  </td>
 </tr>
</table>

<p class="Paragraph0c">Пример настройки прав доступа пользователей:</p>

<p class="Objectname">Таблица 3.79.</p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0">
 <thead>
  <tr>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">№</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Группа пользователей и ее
   функции</span></p>
   </td>
   <td valign="top">
   <p class="TextinTable81"><span class="Interface">Состав ролей</span></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td valign="top">
  <p class="TextinTable81">1. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Администратор</p>
  </td>
  <td valign="top">
  <p class="BulletTab">&#9679; 
  <span class="Interface">ПолныеПрава</span> (из
  подсистемы «Базовая функциональность»)</p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">2. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Ответственный за список пользователей (дополнительно)</p>
  </td>
  <td valign="top">
  <p class="BulletTab"><span class="Interface">&#9679;  </span><span class="Interface">ДобавлениеИзменениеПользователей</span></p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">3. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Ответственный за список внешних пользователей (дополнительно)</p>
  </td>
  <td valign="top">
  <p class="BulletTab">&#9679; 
  <span class="Interface">ДобавлениеИзменениеВнешнихПользователей</span>,</p>
  <p class="BulletTab"><span class="Interface">&#9679;  </span><span class="Interface">&lt;ЧтениеДанныхОбъектовАвторизации&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">4. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Пользователь, работающий с внешними пользователями
  (дополнительно)</p>
  </td>
  <td valign="top">
  <p class="BulletTab"><span class="Interface">&#9679;  </span><span class="Interface">ЧтениеВнешнихПользователей</span></p>
  </td>
 </tr>
 <tr>
  <td valign="top">
  <p class="TextinTable81">5. 
   </p>
  </td>
  <td valign="top">
  <p class="TextinTable81">Внешний пользователь</p>
  </td>
  <td valign="top">
  <p class="BulletTab">&#9679; 
  <span class="Interface">БазовыеПраваВнешнегоПользователя</span>
  (из подсистемы «Базовая функциональность»),</p>
  <p class="BulletTab"><span class="Interface">&#9679;  </span><span class="Interface">ЗапускТонкогоКлиента</span> (из подсистемы «Базовая
  функциональность»)</p>
  </td>
 </tr>
</table>

<a name="issogl2_особые_случаи_внедрения_подсистемы"><h3>Особые случаи внедрения подсистемы</h3></a>

<p class="MsoListBullet">&#9679; 
<A href="3.59. _25EE_25F1_25EE_25E1_25FB_25E5 _25F1_25EB_25F3_25F7_25E0_25E8 _25E2_25ED_25E5_25E4_25F0_25E5_20EA087B14A#_внедрение_подсистемы_«пользователи»">Внедрение подсистемы «Пользователи» без
подсистемы «Контактная информация»</a>.</p>

<p class="MsoListBullet">&#9679; 
<A href="3.59. _25EE_25F1_25EE_25E1_25FB_25E5 _25F1_25EB_25F3_25F7_25E0_25E8 _25E2_25ED_25E5_25E4_25F0_25E5_20EA087B14A#_внедрение_подсистемы_«пользователи»_1">Внедрение подсистемы «Пользователи» без
подсистемы «Свойства»</a>.</p>

<a name="issogl1_использование_при_разработке_конфигурации"><h2>Использование при разработке конфигурации</h2></a>

<p class="Paragraph0c">При создании новых прикладных объектов метаданных нужно
повторно выполнять соответствующую часть процедуры настройки, описанной выше
(например, пересматривать состав типов объектов авторизации).</p>

<p class="Paragraph0c">Для получения ссылки на пользователя, который произвел
вход в информационную базу, рекомендуется использовать функцию <span class="Interface">АвторизованныйПользователь</span> общего модуля <span class="Interface">ПользователиКлиентСервер</span>, которая возвращает ссылку на
элемент справочника <span class="Interface">Пользователи</span> или элемент
справочника <span class="Interface">ВнешниеПользователи</span>.</p>

<p class="Paragraph0c">В коде, вызов которого предполагается только в сеансе
пользователей, рекомендуется использовать функцию <span class="Interface">ТекущийПользователь</span>
общего модуля <span class="Interface">ПользователиКлиентСервер</span>, которая
возвращает ссылку на элемент справочника <span class="Interface">Пользователи</span>.
При вызове функции в сеансе внешнего пользователя будет вызвано исключение.</p>

<p class="Paragraph0c">В коде, вызов которого предполагается только в сеансе
внешних пользователей, рекомендуется использовать функцию <span class="Interface">ТекущийВнешнийПользователь</span>, которая возвращает ссылку на
элемент справочника <span class="Interface">ВнешниеПользователи</span>. При
вызове функции в сеансе пользователя будет вызвано исключение.</p>

<a name="issogl2_недействительные_пользователи"><h3>Недействительные пользователи</h3></a>

<p class="Paragraph0c">В формах пользователя и внешнего пользователя предусмотрен
флажок <span class="Interface">Недействителен</span>, связанный с реквизитом <span class="Interface">Недействителен</span> (по умолчанию – <span class="Interface">Ложь</span>).
При установке флажка <span class="Interface">Недействителен</span> пользователь
скрывается в списке пользователей, списке выбора пользователей, а также при
подборе по строке. Для того чтобы увидеть всех пользователей в списке
пользователей и списке выбора пользователей, надо установить флажок <span class="Interface">Показывать недействительных пользователей</span>.</p>

<p class="Paragraph0c">При обычном использовании справочников описанное поведение
поддерживается автоматически. При открытии списка пользователей или списка
выбора пользователей флажок <span class="Interface">Показывать недействительных
пользователей</span> снят. При подборе по строке в параметры получения данных
выбора автоматически вставляется отбор <span class="Interface">Недействителен = Ложь</span>
(если отбор для реквизита <span class="Interface">Недействителен</span> еще не
указан).</p>

<p class="Paragraph0c">При обсобых случаях использования следует поддержать
описанное поведение самостоятельно:</p>

<p class="MsoListBullet">&#9679; 
При разработке своего списка выбора
пользователей. Например, форма, аналогичная общей форме <span class="Interface">ВыборИсполнителяБизнесПроцесса</span>.</p>

<p class="MsoListBullet">&#9679; 
При подготовке отчетов, в которые могут попасть
недействительные пользователи. Например, в конфигурации «Документооборот» в
отчете по задачам определяется, к какому отделу относится задача, выданная
роли. Отдел определяется по пользователям, входящим в роль. Недействительные
пользователи будут исключены из этого списка – их отделы не попадут в отчет.</p>

<p class="MsoListBullet">&#9679; 
При обращении к справочнику на языке запросов
или из кода.</p>

<a name="issogl2_служебные_пользователи"><h3>Служебные пользователи</h3></a>

<p class="Paragraph0c">В справочнике пользователей предусмотрен реквизит <span class="Interface">Служебный</span>. Этот реквизит применяется в модели сервиса.
Если значение реквизита установлено <span class="Interface">Истина</span>,
пользователь скрывается в списке пользователей, списке выбора пользователей, а
также при подборе по строке.</p>

<p class="Paragraph0c">Как и для флажка <span class="Interface">Недействителен</span>,
при обычном использовании справочника описанное поведение поддерживается
автоматически, а при особых случаях использования следует поддержать описанное
поведение самостоятельно.</p>

<a name="issogl2_настройка_обмена_данными"><h3>Настройка обмена данными</h3></a>

<p class="Paragraph0c">Для настройки обмена данными следует руководствоваться
общими правилами.</p>

<p class="Paragraph0c">В планы обмена распределенной информационной базы (РИБ)
рекомендуется включать все объекты метаданных подсистемы, кроме следующих:</p>

<p class="MsoListBullet">&#9679; 
константа<span class="Interface"> НастройкиВходаПользователей</span>,</p>

<p class="MsoListBullet">&#9679; 
регистр сведений <span class="Interface">СведенияОПользователях</span>.</p>

<p class="Paragraph0c">В планах обмена распределенной информационной базы (РИБ)
рекомендуется отключать регистрацию изменений для следующих объектов метаданных
подсистемы (см. также раздел «<A href="3.28. _25EE_25E1_25EC_25E5_25ED _25E4_25E0_25ED_25ED_25FB_25EC_25E8.htm@_=1504708101#_особенности_создания_начального">Особенности создания начального образа
подчиненного узла распределенной ИБ</a>»):</p>

<p class="MsoListBullet">&#9679; 
константа<span class="Interface">
ПараметрыРаботыПользователей</span>.</p>

<p class="Paragraph0c">Из остальных планов обмена (не РИБ) рекомендуется
исключать следующие объекты метаданных:</p>

<p class="MsoListBullet">&#9679; 
константа<span class="Interface">
ПараметрыРаботыПользователей</span>,</p>

<p class="MsoListBullet"><a name="_префиксация_объектов"></a>&#9679; 
константа<span class="Interface">
НастройкиВходаПользователей</span>,</p>

<p class="MsoListBullet">&#9679; 
регистр сведений <span class="Interface">СведенияОПользователях</span>.</p>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>