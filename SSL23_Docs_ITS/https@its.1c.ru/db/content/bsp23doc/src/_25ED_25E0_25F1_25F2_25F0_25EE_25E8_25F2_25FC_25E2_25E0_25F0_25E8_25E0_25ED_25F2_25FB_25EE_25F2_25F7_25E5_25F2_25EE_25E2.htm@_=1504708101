<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1080;&#1090;&#1100;&#1042;&#1072;&#1088;&#1080;&#1072;&#1085;&#1090;&#1099;&#1054;&#1090;&#1095;&#1077;&#1090;&#1086;&#1074;</title>
		<LINK REL="stylesheet" href="style.css@_=1504708101">
		<SCRIPT src="script.js@_=1504708101" TYPE="text/javascript"></script>
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="_25ED_25E0_25F1_25F2_25F0_25EE_25E8_25F2_25FC_25E2_25E0_25F0_25E8_25E0_25ED_25F2_25FB_25EE_25F2_25F7_25E5_25F2_25EE_25E2.htm" rel="canonical">
<link href="../../../../static/its.content.css@_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="../../../../static/its.content.js@_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../../../../static/html5shiv.js@_=1500896273"></script><![endif]-->

</head>
	<body class="bspdoc">
<a name="_вариантыотчетовпереопределяемыйнастроитьвариантыотчетов"></a><h1>НастроитьВариантыОтчетов</h1>

<pre> Содержит настройки размещения вариантов отчетов в панели отчетов.</pre>
<p class="Paragraph0c"><span class="Bold">Синтаксис</span></p>
<pre> Процедура НастроитьВариантыОтчетов(Настройки) Экспорт</pre>
<p class="Paragraph0c"><span class="Bold">Параметры</span></p>
<pre>   Настройки - Коллекция - Используется для описания настроек отчетов и вариантов
       см. описание к ВариантыОтчетов.ДеревоПредопределенных().
 Описание:
   В данной процедуре необходимо указать каким именно образом предопределенные варианты отчетов
   будут регистрироваться в программе и показываться в панели отчетов.
 Вспомогательные методы:
   1. Функции ОписаниеОтчета и ОписаниеВарианта формируют описание настроек отчета и варианта для последующего изменения:
  НастройкиОтчета   = ВариантыОтчетов.ОписаниеОтчета(Настройки, Метаданные.Отчеты.&lt;ИмяОтчета&gt;);
  НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, НастройкиОтчета, "&lt;ИмяВарианта&gt;");
       Возвращаемые коллекции содержат одинаковый набор свойств.
       НастройкиОтчета используются как умолчания для вариантов, описания которых еще не получены.
       Свойства для изменения:
       * Включен - Булево -
           Если Ложь, то вариант отчета не регистрируется в подсистеме.
           Используется для удаления технических и контекстных вариантов отчетов из всех интерфейсов.
           Эти варианты отчета по прежнему можно открывать в форме отчета программно при помощи
           параметров открытия (см. справку по "Расширение управляемой формы для отчета.КлючВарианта").
       * ВидимостьПоУмолчанию - Булево -
           Если Ложь, то вариант отчета по умолчанию скрыт в панели отчетов.
           Пользователь может "включить" его в режиме настройки панели отчетов
           или открыть через форму "Все отчеты".
       * Описание - Строка - Дополнительная информация по варианту отчета.
           В панелях отчетов выводится в виде подсказки.
           Должно расшифровывать для пользователя содержимое варианта отчета
           и не должно дублировать наименование варианта отчета.
           Используется при поиске.
       * Размещение - Соответствие - Настройки размещения варианта отчета в разделах.
           ** Ключ     - ОбъектМетаданных: Подсистема - Подсистема, в которой размещается отчет или вариант отчета.
           ** Значение - Строка - Необязательный. Настройки размещения в подсистеме.
               ""        - Выводить отчет в своей группе обычным шрифтом.
               СВажный"  - Выводить отчет в своей группе жирным шрифтом.
               ССмТакже" - Выводить отчет в группе "См. также".
       * ФункциональныеОпции - Массив из Строка -
            Имена функциональных опций варианта отчета.
       * НастройкиДляПоиска - Структура - Дополнительные настройки для поиска этого варианта отчета.
           Эти настройки необходимо задавать только если СКД не используется или используется не в полном объеме.
           Например, СКД может использоваться только для параметризации и получения данных,
           а вывод выполняться в фиксированный макет табличного документа.
           ** НаименованияПолей - Строка - Имена полей варианта отчета.
           ** НаименованияПараметровИОтборов - Строка - Имена настроек варианта отчета.
           ** КлючевыеСлова - Строка - Дополнительная терминология (в т.ч. специализированная или устаревшая).
           Разделитель терминов: Символы.ПС.
       * ФорматНастроекСКД - Булево - Отчет использует типовой формат хранения настроек на механике СКД,
           а его основные формы поддерживают стандартную схему взаимодействия между формами (параметры и тип возвращаемого значения).
           Если Ложь, тогда для отчета отключаются проверки консистентности и некоторые механизмы, которые рассчитывают на типовой формат.
       * ОпределитьНастройкиФормы - Булево - Отчет имеет программный интерфейс для тесной интеграции с формой отчета,
           в том числе может переопределять некоторые настройки формы и подписываться на ее события.
           Если Истина и отчет подключен к общей форме ФормаОтчета,
           тогда в модуле объекта отчета следует определить процедуру по шаблону:
                Настройки общей формы отчета подсистемы "Варианты отчетов".
                Параметры:
                  Форма - УправляемаяФорма, Неопределено - Форма отчета или форма настроек отчета.
                      Неопределено когда вызов без контекста.
                  КлючВарианта - Строка, Неопределено - Имя предопределенного
                      или уникальный идентификатор пользовательского варианта отчета.
                      Неопределено когда вызов без контекста.
                  Настройки - Структура - см. возвращаемое значение
                      <A href="_25EF_25EE_25EB_25F3_25F7_25E8_25F2_25FC_25ED_25E0_25F1_25F2_25F0_25EE_25E9_25EA_25E8_25EE_25F2_25F70FBC9981D3#_отчетыклиентсерверполучитьнастройкиотчетапоумолчанию">ОтчетыКлиентСервер.ПолучитьНастройкиОтчетаПоУмолчанию</a>().
               Процедура ОпределитьНастройкиФормы(Форма, КлючВарианта, Настройки) Экспорт
                 Код процедуры.
               КонецПроцедуры
   2. Процедура УстановитьРежимВыводаВПанеляхОтчетов позволяет настроить режим группировки вариантов в панелях отчетов:
  ВариантыОтчетов.УстановитьРежимВыводаВПанеляхОтчетов(Настройки, НастройкиОтчета, Истина/Ложь);
  ВариантыОтчетов.УстановитьРежимВыводаВПанеляхОтчетов(Настройки, Метаданные.Отчеты.&lt;ИмяОтчета&gt;, Истина/Ложь);
  ВариантыОтчетов.УстановитьРежимВыводаВПанеляхОтчетов(Настройки, Метаданные.Подсистемы.&lt;ИмяПодсистемы&gt;, Истина/Ложь);
   3. Процедура НастроитьОтчетВМодулеМенеджера позволяет переопределять настройки отчета в его модуле менеджера:
  ВариантыОтчетов.НастроитьОтчетВМодулеМенеджера(Настройки, Метаданные.Отчеты.&lt;ИмяОтчета&gt;);
      После вставки вызова в модуле менеджера указанного отчета следует разместить экспортную процедуру по шаблону:
       Настройки размещения в панели отчетов.
       Параметры:
         Настройки - Коллекция - Передается "как есть" из ВариантыОтчетовПереопределяемый.НастроитьВариантыОтчетов().
             Может использоваться для получения настроек варианта этого отчета при помощи функции ВариантыОтчетов.ОписаниеВарианта().
         НастройкиОтчета - СтрокаДереваЗначений - Настройки этого отчета,
             уже сформированные при помощи функции ВариантыОтчетов.ОписаниеОтчета() и готовые к изменению.
             См. "Свойства для изменения" процедуры ВариантыОтчетовПереопределяемый.НастроитьВариантыОтчетов().
       Описание:
         См. ВариантыОтчетовПереопределяемый.НастроитьВариантыОтчетов().
       Вспомогательные методы:
       НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, НастройкиОтчета, "&lt;ИмяВарианта&gt;");
       ВариантыОтчетов.УстановитьРежимВыводаВПанеляхОтчетов(Настройки, НастройкиОтчета, Истина/Ложь);
       Примеры:
        1. Установка описания варианта.
       НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, НастройкиОтчета, "&lt;ИмяВарианта&gt;");
       НастройкиВарианта.Описание = НСтр("ru = &apos;&lt;Описание&gt;&apos;");
        2. Отключение варианта отчета.
       НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, НастройкиОтчета, "&lt;ИмяВарианта&gt;");
       НастройкиВарианта.Включен = Ложь;
      Процедура НастроитьВариантыОтчета(Настройки, НастройкиОтчета) Экспорт
        Код процедуры.
      КонецПроцедуры
 Примеры:
  1. Добавление варианта отчета в подсистему.
 НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, Метаданные.Отчеты.ИмяОтчета, "&lt;ИмяВарианта&gt;");
 НастройкиВарианта.Размещение.Вставить(Метаданные.Подсистемы.ИмяРаздела.Подсистемы.ИмяПодсистемы);
  2. Отключение варианта отчета.
 НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, Метаданные.Отчеты.ИмяОтчета, "&lt;ИмяВарианта&gt;");
 НастройкиВарианта.Включен = Ложь;
  3. Отключение всех вариантов отчета, кроме одного.
 НастройкиОтчета = ВариантыОтчетов.ОписаниеОтчета(Настройки, Метаданные.Отчеты.ИмяОтчета);
 НастройкиОтчета.Включен = Ложь;
 НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, НастройкиОтчета, "&lt;ИмяВарианта&gt;");
 НастройкиВарианта.Включен = Истина;
  4. Заполнение настроек для поиска - наименования полей, параметров и отборов:
 НастройкиВарианта = ВариантыОтчетов.ОписаниеВарианта(Настройки, Метаданные.Отчеты.ИмяОтчетаБезСхемы, "");
 НастройкиВарианта.НастройкиДляПоиска.НаименованияПолей =
  НСтр("ru = &apos;Контрагент
  |Договор
  |Ответственный
  |Скидка
  |Дата&apos;");
 НастройкиВарианта.НастройкиДляПоиска.НаименованияПараметровИОтборов =
  НСтр("ru = &apos;Период
  |Ответственный
  |Контрагент
  |Договор&apos;");
  5. Переключение режима вывода в панелях отчетов:
  5.1. Группировка вариантов отчета по этому отчету:
 ВариантыОтчетов.УстановитьРежимВыводаВПанеляхОтчетов(Настройки, Метаданные.Отчеты.ИмяОтчета, Истина);
  5.2. Без группировки по отчету:
 Отчет = ВариантыОтчетов.ОписаниеОтчета(Настройки, Метаданные.Отчеты.ИмяОтчета);
 ВариантыОтчетов.УстановитьРежимВыводаВПанеляхОтчетов(Настройки, Отчет, Ложь);
 Важно:
   Отчет выступает в качестве контейнера вариантов.
     Изменяя настройки отчета можно сразу изменять настройки всех его вариантов.
     Однако, если явно получить настройки варианта отчета, то они станут самостоятельными,
     т.е. более не будут наследовать изменения настроек от отчета. См. пример 3.
   Начальная настройка размещения отчетов по подсистемам зачитывается из метаданных,
     ее дублирование в коде не требуется.
   Функциональные опции варианта объединяются с функциональными опциями этого отчета по следующим правилам:
     (ФО1_Отчета ИЛИ ФО2_Отчета) И (ФО3_Варианта ИЛИ ФО4_Варианта).
   Функциональные опции отчетов не зачитываются из метаданных,
     они применяются на этапе использования подсистемы пользователем.
   Через ОписаниеОтчета можно добавлять функциональные опции, которые будут соединяться по указанным выше правилам,
     но надо помнить, что эти функциональные опции будут действовать только для предопределенных вариантов отчетов.
   Для пользовательских вариантов отчета действуют только функциональные опции отчета
     - они отключаются только с отключением всего отчета.</pre>
<p class="Paragraph0c"><span class="Bold">Расположение</span></p>
<pre> Общий модуль ВариантыОтчетовПереопределяемый</pre>
<p class="Paragraph0c"><span class="Bold">Доступность</span></p>
<pre> Сервер, Толстый клиент, Внешнее соединение</pre>
	</body>
</html>